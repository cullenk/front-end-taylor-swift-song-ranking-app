<div class="contact-container">
  <!-- Header Section -->
  <header class="header-container">
    <img 
      src="https://d3e29z0m37b0un.cloudfront.net/graphics/bracelets.webp" 
      alt="Friendship bracelets decoration" 
      class="background-graphic"
      loading="lazy"
    >
    <div class="header-div">
      <h1 class="header-title">...Question?</h1>
      <h2 class="header-subtitle">Let's Chat!</h2>
      <p class="header-description">
        Got feedback, suggestions, or just want to say hi? I'd love to hear from you!
      </p>
    </div>
  </header>

  <!-- Contact Form -->
  <section class="form-section">
    <form 
      [formGroup]="contactForm" 
      (ngSubmit)="onSubmit()" 
      class="contact-form"
      novalidate
    >
      <!-- Name Field -->
      <div class="form-group">
        <label for="name" class="form-label">
          <i class="fas fa-user" aria-hidden="true"></i>
          Name <span class="required">*</span>
        </label>
        <input 
          id="name" 
          type="text" 
          formControlName="name" 
          class="form-input"
          [class.error]="hasFieldError('name')"
          placeholder="Enter your name"
          maxlength="50"
          autocomplete="name"
        >
        <div class="error-message" *ngIf="hasFieldError('name')">
          {{ getFieldError('name') }}
        </div>
      </div>

      <!-- Email Field -->
      <div class="form-group">
        <label for="email" class="form-label">
          <i class="fas fa-envelope" aria-hidden="true"></i>
          Email <span class="required">*</span>
        </label>
        <input 
          id="email" 
          type="email" 
          formControlName="email" 
          class="form-input"
          [class.error]="hasFieldError('email')"
          placeholder="Enter your email address"
          maxlength="100"
          autocomplete="email"
        >
        <div class="error-message" *ngIf="hasFieldError('email')">
          {{ getFieldError('email') }}
        </div>
      </div>

      <!-- Message Field -->
      <div class="form-group">
        <label for="message" class="form-label">
          <i class="fas fa-comment" aria-hidden="true"></i>
          Message <span class="required">*</span>
        </label>
        <textarea 
          id="message" 
          formControlName="message" 
          class="form-textarea"
          [class.error]="hasFieldError('message')"
          placeholder="Tell me what's on your mind..."
          maxlength="1000"
          rows="5"
        ></textarea>
        <div class="form-help">
          <div class="error-message" *ngIf="hasFieldError('message')">
            {{ getFieldError('message') }}
          </div>
          <div class="char-count">
            {{ getMessageCharCount() }}/1000 characters
          </div>
        </div>
      </div>

      <!-- Submit Button -->
      <div class="form-actions">
        <button 
          type="submit" 
          class="submit-button"
          [class.loading]="submitStatus === 'sending'"
          [disabled]="submitStatus === 'sending'"
          [attr.aria-label]="submitStatus === 'sending' ? 'Sending message...' : 'Send message'"
        >
          <span *ngIf="submitStatus !== 'sending'" class="button-content">
            <i class="fas fa-paper-plane" aria-hidden="true"></i>
            Send Message
          </span>
          <span *ngIf="submitStatus === 'sending'" class="button-content">
            <i class="fas fa-spinner fa-spin" aria-hidden="true"></i>
            Sending...
          </span>
        </button>
      </div>

      <!-- Status Messages -->
      <div class="status-messages">
        <div 
          *ngIf="submitStatus === 'success'" 
          class="status-message success-message"
          role="alert"
          aria-live="polite"
        >
          <i class="fas fa-check-circle" aria-hidden="true"></i>
          <div class="message-content">
            <strong>Message sent successfully!</strong>
            <p>Thanks for reaching out. I'll get back to you soon!</p>
          </div>
          <button type="button" class="close-btn" (click)="clearStatus()" aria-label="Close message">
            <i class="fas fa-times"></i>
          </button>
        </div>
        
        <div 
          *ngIf="submitStatus === 'error'" 
          class="status-message error-message"
          role="alert"
          aria-live="polite"
        >
          <i class="fas fa-exclamation-triangle" aria-hidden="true"></i>
          <div class="message-content">
            <strong>Oops! Something went wrong.</strong>
            <p>Please try again later or reach out through social media.</p>
          </div>
          <button type="button" class="close-btn" (click)="clearStatus()" aria-label="Close message">
            <i class="fas fa-times"></i>
          </button>
        </div>
      </div>
    </form>
  </section>
</div>